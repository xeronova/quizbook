선생님 모드 전체 워크플로우를 순서대로 실행하라. 5개 단계를 차례로 수행하며, 각 단계의 결과를 종합하여 최종 보고서를 출력한다.

## 입력 파라미터

- **$ARGUMENTS**: 없음

## 실행 절차

---

### 1단계: 환경 점검 (setup)

선생님 모드 환경이 구성되어 있는지 점검한다:

**체크 항목:**
- [ ] `data/students/` 디렉토리 존재 여부
- [ ] `data/reports/` 디렉토리 존재 여부
- [ ] `data/roster.json` 파일 존재 여부
- [ ] game.js에 `StudentExporter` 객체 존재 여부
- [ ] index.html에 `student-name-input` 요소 존재 여부

**모두 통과**: "✅ 1단계: 환경 설정 확인 완료" 출력 후 다음 단계로
**미완료 항목 있음**: 사용자에게 `/teacher-setup` 실행 여부를 물어본다
  - 승인 시: `/teacher-setup` 내용을 실행한 후 다음 단계로
  - 거부 시: 중단

---

### 2단계: 새 데이터 확인 (import)

새로 가져올 학생 데이터가 있는지 확인한다:

**탐색 경로:**
1. 프로젝트 루트의 `*_quizbook.json` 파일
2. `~/Downloads/*_quizbook.json` 파일

```
🔍 새 학생 데이터 탐색

| #  | 파일명                    | 학생 이름 | 상태        |
|----|--------------------------|---------|-------------|
| 1  | 홍길동_quizbook.json      | 홍길동   | 🆕 신규      |
| 2  | 김철수_quizbook.json      | 김철수   | 🔄 업데이트   |
```

- **새 파일 없음**: "ℹ️ 새 학생 데이터 없음. 기존 데이터로 분석을 진행합니다." 출력 후 다음 단계로
- **새 파일 있음**: 사용자에게 가져올 파일을 선택하게 한다
  - 각 선택된 파일에 대해 `/teacher-import` 절차를 실행
  - 모든 import가 완료되면 다음 단계로

---

### 3단계: 개별 보고서 생성 (report)

`data/roster.json`에 등록된 모든 학생에 대해 개별 보고서를 생성한다:

```
📝 개별 보고서 생성

| #  | 학생   | 상태          | 등급 | 평균 정답률 |
|----|-------|---------------|------|-----------|
| 1  | 홍길동 | ✅ 보고서 생성  | A    | 82%       |
| 2  | 김철수 | ✅ 보고서 생성  | B    | 71%       |
| 3  | 이영희 | ⚠️ 데이터 부족 | —    | —         |
```

각 학생에 대해 `/teacher-report` 절차를 실행한다.
데이터가 부족한 학생은 건너뛰고 경고를 표시한다.

---

### 4단계: 학생 간 비교 (compare)

등록된 모든 학생 간 비교 분석을 실행한다:

- 비교 가능한 학생이 2명 이상인 경우에만 실행
- `/teacher-compare all` 절차를 실행
- 1명 이하이면: "ℹ️ 비교할 학생이 부족합니다. 건너뜁니다." 출력 후 다음 단계로

---

### 5단계: 학급 전체 통계 (class)

학급 전체 통계를 생성한다:

- `/teacher-class` 절차를 실행
- 분석 결과와 액션 아이템을 출력한다

---

### 최종 보고: 통합 결과 출력

모든 단계의 결과를 종합하여 최종 보고서를 출력한다:

```
📋 선생님 모드 — 통합 실행 완료

실행 시각: <YYYY-MM-DD HH:MM:SS>

═══════════════════════════════════════

✅ 실행 결과 요약

| 단계 | 작업           | 상태 | 비고                    |
|------|---------------|------|------------------------|
| 1    | 환경 점검      | ✅   | 설정 완료               |
| 2    | 데이터 가져오기  | ✅   | N명 신규, M명 업데이트   |
| 3    | 개별 보고서     | ✅   | K명 생성 완료           |
| 4    | 학생 비교      | ✅   | L명 비교 분석 완료       |
| 5    | 학급 통계      | ✅   | 보고서 생성 완료         |

═══════════════════════════════════════

📊 학급 핵심 지표

| 지표            | 값                  |
|----------------|---------------------|
| 등록 학생        | N명                 |
| 학급 평균 정답률   | ?%                 |
| 최우수 학생       | <이름> (?%)         |
| 성장 우수 학생    | <이름> (+?%p)        |
| 보충 필요 카테고리 | <카테고리>           |

═══════════════════════════════════════

📁 생성된 보고서

  data/reports/
  ├── <이름1>_report.md
  ├── <이름2>_report.md
  ├── ...
  ├── compare_all_<날짜>.md
  └── class_summary.md

═══════════════════════════════════════

📌 다음 액션

🚨 즉시 조치:
  - <구체적 조치 사항>

⚠️ 모니터링:
  - <모니터링 사항>

✅ 긍정적:
  - <긍정적 사항>
```

---

## 오류 처리 정책

- 각 단계 실패 시 사용자에게 계속 진행할지 물어본다
  - 1단계 실패: 필수 — 중단
  - 2~5단계 실패: 선택 — 스킵 가능, 나머지 단계 계속 진행
- 최종 보고에서 실패한 단계는 "❌ 실패"로 표시하고 원인을 기록

## 주의사항

- 각 단계는 해당 명령어(teacher-setup/import/report/compare/class)의 절차를 따른다.
- 학생 데이터 파일은 읽기만 한다 (import 단계 제외).
- 사용자 승인 없이 파일을 수정하지 마라 (setup과 import 단계에서 개별 승인).
- 학생이 많을 경우 (10명 이상) 진행 상황을 단계별로 보고한다.
